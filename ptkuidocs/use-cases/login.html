<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Pustakalaya UI | Use case | User Login</title>
    <link type="text/css" rel="stylesheet" href="../css/pustakalaya-ui.css" />
</head>

<body>
    <header id="header"></header>

    <nav></nav>

    <div class="main-content">
        <noscript>
            This website does not work without JavaScript. Please enable JavaScript or use a browser that supports JavaScript.
        </noscript>

        <div class="back-button">
            <a href="./toc-uses-cases.html">Back</a>
        </div>

        <h1>User login</h1>

        <h2>Login with username and password</h2>

        <h3>Page Details</h3>
        <table class="ptk-table-simple">
            <tbody>
                <tr>
                    <td>URL</td>
                    <td>
                        <code class="url">&lt;domain&gt;/login</code>
                    </td>
                </tr>
                <tr>
                    <td>Access condition</td>
                    <td>No user is logged in.</td>
                </tr>
                <tr>
                    <td>Access condition fails</td>
                    <td>Redirect to <code class="url">/home</code></td>
                </tr>
                <tr>
                    <td>Type</td>
                    <td>Form</td>
                </tr>
            </tbody>
        </table>


        <h3>Form: User Login</h3>

        <h4>Controls</h4>
        <dl class="ctrl-list">
            <dt>
                <span class="ctrl-name">username</span>
            </dt>
            <dd>
                <table class="ptk-table-simple table-valign-top">
                    <tbody>
                        <tr>
                            <td>Description</td>
                            <td>Username of the user.</td>
                        </tr>
                        <tr>
                            <td>Label</td>
                            <td>Username</td>
                        </tr>
                        <tr>
                            <td>Type</td>
                            <td>text</td>
                        </tr>
                        <tr>
                            <td>Required</td>
                            <td>Yes</td>
                        </tr>
                        <tr>
                            <td>Validation</td>
                            <td>Length must be between 1-80 characters.</td>
                        </tr>
                        <tr>
                            <td>Error messages</td>
                            <td>
                                <table class="ptk-table-compact">
                                    <thead>
                                        <tr>
                                            <th>Condition</th>
                                            <th>Message</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>length is 0</td>
                                            <td>Required field.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </dd>

            <dt>
                <span class="ctrl-name">password</span>
            </dt>
            <dd>
                <table class="ptk-table-simple table-valign-top">
                    <tbody>
                        <tr>
                            <tr>
                                <td>Description</td>
                                <td>Password of the user.</td>
                            </tr>
                            <tr>
                                <td>Label</td>
                                <td>Password</td>
                            </tr>
                            <tr>
                                <td>Type</td>
                                <td>text</td>
                            </tr>
                            <tr>
                                <td>Required</td>
                                <td>Yes</td>
                            </tr>
                            <tr>
                                <td>Validation</td>
                                <td>Length must be between 1-16 characters.</td>
                            </tr>
                            <tr>
                                <td>Error messages</td>
                                <td>
                                    <table class="ptk-table-compact">
                                        <thead>
                                            <tr>
                                                <th>Condition</th>
                                                <th>Message</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>length is 0</td>
                                                <td>Required field.</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                    </tbody>
                </table>
            </dd>
        </dl>
        <hr/>
        <dl class="ctrl-list">
            <dt>
                <span class="ctrl-name">login</span>
            </dt>
            <dd>
                <table class="ptk-table-simple table-valign-top">
                    <tbody>
                        <tr>
                            <td>Label</td>
                            <td>Login</td>
                        </tr>
                        <tr>
                            <td>Type</td>
                            <td>button</td>
                        </tr>
                        <tr>
                            <td>Action</td>
                            <td>Submit the form if it is valid.</td>
                        </tr>
                    </tbody>
                </table>
            </dd>
        </dl>

        <h4>Condition for valid form</h4>
        <ul>
            <li>All form fields are valid.</li>
        </ul>

        <h4>Form data submisssion</h4>
        <table class="ptk-table-simple">
            <tbody>
                <tr>
                    <td>Endpoint</td>
                    <td>
                        <code class="url">&lt;api-domain&gt;/ptk/login</code>
                    </td>
                </tr>
                <tr>
                    <td>Method</td>
                    <td>POST</td>
                </tr>
                <tr>
                    <td>Content-type</td>
                    <td>JSON</td>
                </tr>
            </tbody>
        </table>

        <h4>Action on response</h4>

        <div class="ptk-table-wrapper">
            <table class="ptk-table table-valign-top">
                <thead>
                    <tr>
                        <th>HRC</th>
                        <th>Response</th>
                        <th>Type</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>200</td>
                        <td>::JWT is received</td>
                        <td>base64</td>
                        <td>
                            <ul class="list-style-inside zero-bottom">
                                <li><p>Store <a href="https://jwt.io/">JWT</a> to browser's local storage.</p>
                                    <p>The following data is received in payload:</p>
                                    <table class="ptk-table mb-0">
                                        <thead>
                                            <tr>
                                                <th>Payload field name</th>
                                                <th>Description</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>name</td>
                                                <td>First name of the user</td>
                                            </tr>
                                            <tr>
                                                <td>email</td>
                                                <td>Email of the user</td>
                                            </tr>
                                            <tr>
                                                <td>role</td>
                                                <td>Role of the user</td>
                                            </tr>
                                            <tr>
                                                <td>locale</td>
                                                <td>Locale of the user</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </li>
                                <li>Redirect user to
                                    <code class="url">/home</code>.</li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <td>422</td>
                        <td>2x:ERROR_LOGIN_UNSUCCESSFUL</td>
                        <td>string</td>
                        <td>
                            <p>For error codes, see this <a href="https://github.com/optimus29/pustakalaya/blob/master/src/ptkdocs/error-codes.html">document</a>.</p>
                            <table class="ptk-table-compact">
                                <thead>
                                    <tr>
                                        <th>Code</th>
                                        <th>Error Message</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>21</td>
                                        <td>Invalid credentials.</td>
                                    </tr>
                                    <tr>
                                        <td>22</td>
                                        <td>Account is locked.</td>
                                    </tr>
                                    <tr>
                                        <td>23</td>
                                        <td>Access to account has been revoked.</td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>500</td>
                        <td>41:ERROR_SYSTEM_INACCESSIBLE</td>
                        <td>string</td>
                        <td>Pass response to error handler.</td>
                    </tr>
                    <tr>
                        <td>500</td>
                        <td>41:ERROR_UNKNOWN</td>
                        <td>string</td>
                        <td>Pass response to error handler.</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="back-button">
            <a href="./toc-uses-cases.html">Back</a>
        </div>
        <hr/>
    </div>
    <!-- .main-content -->

    <footer id="footer"></footer>
    <script src="../js/global.js"></script>
</body>

</html>