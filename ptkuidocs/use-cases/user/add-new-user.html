<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Pustakalaya UI | Use case | Add New User</title>
    <link type="text/css" rel="stylesheet" href="../../css/pustakalaya-ui.css" />
</head>

<body>
    <header id="header"></header>

    <nav></nav>

    <div class="main-content">
        <noscript>
            This website does not work without JavaScript. Please enable JavaScript or use a browser that supports JavaScript.
        </noscript>
        <div class="back-button">
            <a href="../toc-uses-cases.html">Back</a>
        </div>

        <h1>Add New User</h1>

        <h3>Terminology</h3>
        <table class="ptk-table-simple">
            <tbody>
                <tr>
                    <td>User</td>
                    <td>New user to be added</td>
                </tr>
                <tr>
                    <td>Requester</td>
                    <td>An existing user.</td>
                </tr>
            </tbody>
        </table>

        <h3>Page Details</h3>
        <table class="ptk-table-simple table-valign-top">
            <tbody>
                <tr>
                    <td>URL</td>
                    <td>
                        <code class="url">&lt;domain&gt;/user/add</code>
                    </td>
                </tr>
                <tr>
                    <td>Access condition</td>
                    <td>
                        <ol class="list-style-inside zero-bottom">
                            <li>Requester is logged in.</li>
                            <li>Requester has role LIBRARIAN or above.</li>
                        </ol>
                    </td>
                </tr>
                <tr>
                    <td>Type</td>
                    <td>Form</td>
                </tr>
            </tbody>
        </table>

        <h3>Form data submisssion</h3>
        <table class="ptk-table-simple">
            <tbody>
                <tr>
                    <td>Endpoint</td>
                    <td>
                        <code class="url">&lt;api-domain&gt;/ptk/newUser</code>
                    </td>
                </tr>
                <tr>
                    <td>Method</td>
                    <td>POST</td>
                </tr>
                <tr>
                    <td>Content-type</td>
                    <td>JSON</td>
                </tr>
            </tbody>
        </table>

        <h3>Form controls</h3>
        <dl class="ctrl-list">
            <dt>
                <span class="ctrl-name">firstName</span>
            </dt>
            <dd>
                <table class="ptk-table-simple table-valign-top">
                    <tbody>
                        <tr>
                            <td>Description</td>
                            <td>First name of new user</td>
                        </tr>
                        <tr>
                            <td>Label</td>
                            <td>Firat name</td>
                        </tr>
                        <tr>
                            <td>Type</td>
                            <td>text</td>
                        </tr>
                        <tr>
                            <td>Required</td>
                            <td>Yes</td>
                        </tr>
                        <tr>
                            <td>Validation</td>
                            <td>Length must be between 1-30 characters.</td>
                        </tr>
                        <tr>
                            <td>Error&nbsp;messages</td>
                            <td>
                                <table class="ptk-table-compact">
                                    <thead>
                                        <tr>
                                            <th>Condition</th>
                                            <th>Message</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>length is 0</td>
                                            <td>Required field.</td>
                                        </tr>
                                        <tr>
                                            <td>length &gt; max</td>
                                            <td>Maximum length is 30 characters.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </dd>

            <dt>
                <span class="ctrl-name">lastName</span>
            </dt>
            <dd>
                <table class="ptk-table-simple table-valign-top">
                    <tbody>
                        <tr>
                            <td>Description</td>
                            <td>Last name of new user</td>
                        </tr>
                        <tr>
                            <td>Label</td>
                            <td>Last name</td>
                        </tr>
                        <tr>
                            <td>Type</td>
                            <td>text</td>
                        </tr>
                        <tr>
                            <td>Required</td>
                            <td>Yes</td>
                        </tr>
                        <tr>
                            <td>Validation</td>
                            <td>Length must be between 1-30 characters.</td>
                        </tr>
                        <tr>
                            <td>Error&nbsp;messages</td>
                            <td>
                                <table class="ptk-table-compact">
                                    <thead>
                                        <tr>
                                            <th>Condition</th>
                                            <th>Message</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>length is 0</td>
                                            <td>Required field.</td>
                                        </tr>
                                        <tr>
                                            <td>length &gt; max</td>
                                            <td>Maximum length is 30 characters.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </dd>

            <dt>
                <span class="ctrl-name">email</span>
            </dt>
            <dd>
                <table class="ptk-table-simple table-valign-top">
                    <tbody>
                        <tr>
                            <td>Description</td>
                            <td>Email of new user</td>
                        </tr>
                        <tr>
                            <td>Label</td>
                            <td>Email</td>
                        </tr>
                        <tr>
                            <td>Type</td>
                            <td>text</td>
                        </tr>
                        <tr>
                            <td>Required</td>
                            <td>Yes</td>
                        </tr>
                        <tr>
                            <td>Validation</td>
                            <td>
                                <ul class="list-style-inside zero-bottom">
                                    <li>Length must be between 1-80 characters.</li>
                                    <li>Must pass the regular expression:
                                        <code class="pattern">^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$</code>
                                    </li>
                                </ul>
                            </td>
                        </tr>
                        <tr>
                            <td>Error&nbsp;messages</td>
                            <td>
                                <table class="ptk-table-compact">
                                    <thead>
                                        <tr>
                                            <th>Condition</th>
                                            <th>Message</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>length is 0</td>
                                            <td>Required field.</td>
                                        </tr>
                                        <tr>
                                            <td>length &gt; max</td>
                                            <td>Maximum length is 30 characters.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </dd>

            <dt>
                <span class="ctrl-name">locale</span>
            </dt>
            <dd>
                <table class="ptk-table-simple table-valign-top">
                    <tbody>
                        <tr>
                            <td>Description</td>
                            <td>Locale of new user</td>
                        </tr>
                        <tr>
                            <td>Label</td>
                            <td>Locale</td>
                        </tr>
                        <tr>
                            <td>Type</td>
                            <td>select</td>
                        </tr>
                        <tr>
                            <td>Required</td>
                            <td>Yes</td>
                        </tr>
                        <tr>
                            <td>Default value</td>
                            <td>Same as requester's locale</td>
                        </tr>
                        <tr>
                            <td>Fetch data</td>
                            <td>
                                To populate option fields, fetch data from the url
                                <code class="url">
                                    &lt;api-endpoint&gt;/ptk/locale</code>.
                                See the
                                <a href="https://github.com/optimus29/pustakalaya/tree/master/src/ptkdocs/use-cases/locale.html">
                                    document</a>
                                for more information.
                            </td>
                        </tr>
                        <tr>
                            <td>Validation</td>
                            <td>One of the locales must be selected.</td>
                        </tr>
                        <tr>
                            <td>Error&nbsp;messages</td>
                            <td>
                                <table class="ptk-table-compact">
                                    <thead>
                                        <tr>
                                            <th>Condition</th>
                                            <th>Message</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>None of the locales is selected</td>
                                            <td>Required field.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </dd>
        </dl>
        
        <hr/>
        <dl class="ctrl-list">
            <dt>
                <span class="ctrl-name">addUser</span>
            </dt>
            <dd>
                <table class="ptk-table-simple table-valign-top">
                    <tbody>
                        <tr>
                            <td>Label</td>
                            <td>Add User</td>
                        </tr>
                        <tr>
                            <td>Type</td>
                            <td>button</td>
                        </tr>
                        <tr>
                            <td>Action</td>
                            <td>Submit the form if form is valid.</td>
                        </tr>
                    </tbody>
                </table>
            </dd>
            <dt>
                <span class="ctrl-name">reset</span>
            </dt>
            <dd>
                <table class="ptk-table-simple table-valign-top">
                    <tbody>
                        <tr>
                            <td>Label</td>
                            <td>Reset</td>
                        </tr>
                        <tr>
                            <td>Type</td>
                            <td>button</td>
                        </tr>
                        <tr>
                            <td>Action</td>
                            <td>Reset the form to default values.</td>
                        </tr>
                    </tbody>
                </table>
            </dd>
        </dl>
        
        <h4>Condition for valid form</h4>
        <ul>
            <li>All form fields are valid.</li>
        </ul>


        <h3>Action on response</h3>

        <div class="ptk-table-wrapper">
            <table class="ptk-table table-valign-top">
                <thead>
                    <tr>
                        <th>HRC</th>
                        <th>Response</th>
                        <th>Type</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>200</td>
                        <td>10:SUCCESS_NEWUSER_ADDED</td>
                        <td>text</td>
                        <td>
                            <ul class="list-style-inside zero-bottom">
                                <li>Show message "User added successfully".</li>
                                <li>Reset the form to default values.</li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <td>422</td>
                        <td>3x:ERROR_INVALID_[FIRST_INVALID_FIELD_NAME]</td>
                        <td>string</td>
                        <td>
                            <p>
                                For error codes, see 
                                <a href="https://github.com/optimus29/pustakalaya/blob/master/src/ptkdocs/error-codes.html">this</a>
                                document.
                            </p>
                            <p>Error messages remain same as given above in their description.</p>
                            <p>The below cases were not covered in the above description.</p>
                            <table class="ptk-table-compact">
                                <thead>
                                    <tr>
                                        <th>Code</th>
                                        <th>Error Message</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="2">email</td>
                                    </tr>
                                    <tr>
                                        <td>35</td>
                                        <td>Email already exists.</td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>500</td>
                        <td>41:ERROR_SYSTEM_INACCESSIBLE</td>
                        <td>string</td>
                        <td>Pass response to error handler.</td>
                    </tr>
                    <tr>
                        <td>500</td>
                        <td>41:ERROR_UNKNOWN</td>
                        <td>string</td>
                        <td>Pass response to error handler.</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="back-button">
            <a href="../toc-uses-cases.html">Back</a>
        </div>
    </div>

    <footer id="footer"></footer>
    <script src="../../js/global.js"></script>
</body>

</html>

<!--

    <table class="ptk-table-simple table-valign-top">
        <tbody>
            <tr>
                <td>Description</td>
                <td></td>
            </tr>
            <tr>
                <td>Label</td>
                <td></td>
            </tr>
            <tr>
                <td>Type</td>
                <td></td>
            </tr>
            <tr>
                <td>Required</td>
                <td></td>
            </tr>
            <tr>
                <td>Validation</td>
                <td></td>
            </tr>
            <tr>
                <td>Error messages</td>
                <td>
                    <table class="ptk-table-compact">
                        <thead>
                            <tr>
                                <th>Condition</th>
                                <th>Message</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </td>
            </tr>
        </tbody>
    </table>
-->